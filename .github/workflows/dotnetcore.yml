name: LogFSM Package Build Script 

on: [push]

jobs:
  build_r_package:

    runs-on: macOS-latest

    steps:
    - uses: actions/checkout@v1
    
    - name: Read Version from R Package
      run: echo "::set-env name=VERSION::$(grep -P -o "(?<=Version:.)([0-9]|\\.)*(?=\\s|$)" r/DESCRIPTION)"
 
    - run: echo "Building Version $VERSION"
      shell: bash

    - name: Determine version
      run: echo "::set-env name=XX::$(git log --pretty=format:'%h' -n 1)"      
      
    - run: echo "Building Version $XX"
      shell: bash